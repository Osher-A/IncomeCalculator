@page "/first-parent/{Children}/{TaxYear}"
@page "/firt-parent"

@inject WorkDetails Parent1WD;
<CascadingValue Value="true">
<ParentWorkDetails Parent="first Parent" PullUpDetails=UpDateWorkDetails/>
<NextPageButton Url="@GetUrl()"/>
</CascadingValue>
@code {
	[Parameter]
	public string Children {get;  set; }
	[Parameter]
	public string TaxYear { get; set; }

	protected override void OnAfterRender(bool firstRender)
	{
		if(firstRender)
		{
		Parent1WD.Period = Period.Year;
		Parent1WD.MinWage = new MinWage { TaxYear = Convert.ToDateTime(TaxYear) };
		}
	}

	private string GetUrl()
	{
		return "second-parent/" + Children;
	}

	private void UpDateWorkDetails(WorkDetails workDetails)
	{
		Parent1WD.Age = workDetails.Age;
		Parent1WD.HoursPW = workDetails.HoursPW;
		Parent1WD.HourlyRate = workDetails.HourlyRate;
		Parent1WD.IsMinWage = workDetails.IsMinWage;
	}
}
