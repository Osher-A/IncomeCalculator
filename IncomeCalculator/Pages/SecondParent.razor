@page "/second-parent/{Children}"
@page "/second-parent"

@inject WorkDetails Parent1WD;
@inject FinancialDetails Fd;
@inject NavigationManager _navigator;

<EditForm Model=Fd OnValidSubmit=Submit>
<CascadingValue Value="true" >
<ParentWorkDetails Parent="Second Parent" PullUpDetails=SetDetails/>
<NextPageButton  Text="Submit" />
</CascadingValue>
</EditForm>	


@code {
	[Parameter]
	public string Children { get; set; }

	protected override void OnInitialized()
	{
		Fd.ChildrenAmount = Convert.ToInt32(Children);
		Fd.Parent1WorkDetails = Parent1WD;
		Fd.Parent2WorkDetails = new WorkDetails () {Period = Period.Year};
		Fd.TaxYear = Parent1WD.MinWage.TaxYear;
	}

	private void SetDetails(WorkDetails parent2WorkDetails)
	{
		parent2WorkDetails.Period = Period.Year;
		Fd.Parent2WorkDetails = parent2WorkDetails;
	}

	private void Submit()
	{
		_navigator.NavigateTo("result");
	}

}